@model InfoStore.Models.ToDoModel

@*<form id="deadline-form" asp-action="Deadline" class="row align-items-center g-1 p-1">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
    <input type="hidden" asp-for="Id" />
    <input type="hidden" asp-for="Text" />
    <input type="hidden" asp-for="Index" />
    <div class="accordion" id="accordionToDo-@(this.Model.Index + 1)">
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingOne-@(this.Model.Index + 1)">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne-@(this.Model.Index + 1)" aria-expanded="true" aria-controls="collapseOne-@(this.Model.Index + 1)">
                    Deadline
                </button>
            </h2>
            <div id="collapseOne-@(this.Model.Index + 1)" class="accordion-collapse collapse show" aria-labelledby="headingOne-@(this.Model.Index + 1)" data-bs-parent="#headingOne-@(this.Model.Index + 1)">
                <div class="accordion-body">
                    <div class="input-group">
                        <input asp-for="DueDateTime" class="form-control flex-grow-0" asp-format="{0:yyyy-MM-ddTHH:mm}" style="flex-basis: 16rem" />
                        <span asp-validation-for="DueDateTime" class="text-danger"></span>
                    </div>
                </div>
            </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingTwo-@(this.Model.Index + 1)">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo-@(this.Model.Index + 1)" aria-expanded="false" aria-controls="collapseTwo-@(this.Model.Index + 1)">
                    Send a reminder to
                </button>
            </h2>
            <div id="collapseTwo-@(this.Model.Index + 1)" class="accordion-collapse collapse" aria-labelledby="headingTwo-@(this.Model.Index + 1)" data-bs-parent="#accordionToDo-@(this.Model.Index + 1)">
                <div class="accordion-body">
                    <div class="input-group">
                        <input asp-for="@this.Model.EMail" class="form-control flex-grow-1 me-1" placeholder="EMail address" />
                        <input asp-for="@this.Model.Before" class="form-control flex-grow-0 me-1" style="flex-basis: 5rem" />
                        <div class="dropdown flex-grow-0">
                            <button id="dropdownTimeUnit-@(this.Model.Index + 1)" type="button" class="btn btn-outline-secondary dropdown-toggle ps-3" data-bs-toggle="dropdown" data-bs-todo-id="@this.Model.Id" aria-expanded="false">
                                Select
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="dropdownTimeUnit-@(this.Model.Index + 1)">
                                @{
                                    foreach (var unit in this.GetTimeUnitNames())
                                    {
                                        <li><a class="dropdown-item" href="#">@unit</a></li>
                                    }
                                }
                            </ul>
                        </div>
                        <label class="col-form-label flex-grow-0 ms-1">before.</label>
                    </div>
                </div>
            </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingThree-@(this.Model.Index + 1)">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree-@(this.Model.Index + 1)" aria-expanded="false" aria-controls="collapseThree-@(this.Model.Index + 1)">
                    Then repeat it every
                </button>
            </h2>
            <div id="collapseThree-@(this.Model.Index + 1)" class="accordion-collapse collapse" aria-labelledby="headingThree-@(this.Model.Index + 1)" data-bs-parent="#accordionToDo-@(this.Model.Index + 1)">
                <div class="accordion-body">
                    <div class="input-group">
                        <input asp-for="@this.Model.Repeat" class="form-control flex-grow-0" style="flex-basis: 5rem" />
                        <label id="label-time-units-@(this.Model.Index + 1)" class="col-form-label flex-grow-0 ms-1" style="width: auto"></label>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="form-group">
        <input type="submit" value="Update" class="btn btn-primary float-end" />
    </div>
</form>
*@
@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}

@functions {
    IEnumerable<string> GetTimeUnitNames()
    {
        return Enum.GetNames(typeof(ToDoModel.TimeUnit));
    }
}

